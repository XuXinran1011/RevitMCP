# 开发计划

## 项目目标
- 通过自然语言交互，自动创建和查询Revit建筑模型，提升BIM建模效率。
- 构建可扩展、可维护的分层架构，便于后续功能扩展和集成。

## 迭代规划

### Sprint 1：基础通信与核心模型
- [x] 设计并实现 Shared 层最小 DTO、接口、消息协议
- [x] 实现 Plugin 端与 Server 端基础跨进程通信
- [x] 编写端到端通信单元测试与集成测试

### Sprint 2：Ribbon UI 与命令流
- [x] 实现 Ribbon UI（启动/停止服务按钮）
- [x] 实现启动/停止 MCP Server 命令
- [x] 实现"查询所有墙体"命令（命令流打通）
- [x] 实现结果展示（弹窗/面板）

### Sprint 3：自然语言解析与模型操作
- [ ] 设计并实现自然语言到命令的解析器（规则/模板）
- [ ] 支持"创建房间/墙体/门窗/楼板"等基础命令
- [ ] Server 端实现对应 Revit API 操作（可先 Mock）
- [ ] 支持多轮对话和参数补全

### Sprint 4：端到端演示与系统测试
- [ ] 端到端多轮自然语言建模演示
- [ ] 完善异常处理与用户反馈
- [ ] MVP 文档编写（含演示脚本、安装配置）

### 后续迭代
- 高级功能（族库管理、变更管理、工程量计算等）
- 多版本Revit支持、性能优化、安全增强
- 安装包制作与配置指导
- 与项目管理系统集成接口预留

## 进度追踪
- 每个Sprint结束后，更新本文件和[REVITMCP_MODULES_CHECKLIST.md]，确保进度透明。

## 阶段性进度总结
- 架构、基础设施、通信链路、集成测试体系已全部打通。
- CI/CD流程已实现自动化测试，所有集成测试通过。
- MCPTestClient测试桩已实现，支持端到端链路验证。
- 项目已具备持续开发和扩展的基础。

## CI/CD现状与问题
- 支持多TargetFramework（net8.0/net9.0）自动化测试。
- 所有集成测试均可在本地和GitHub Actions自动运行。
- 测试报告上传阶段如遇artifact命名冲突，可通过为不同框架指定不同artifact名或只上传一次解决，不影响主流程。
- 需持续关注CI流程中的artifact冲突、依赖还原等偶发问题，保持主干分支CI绿灯。

## 当前开发重点/下一步目标
- 进入"核心业务功能"开发阶段，优先实现"自然语言创建小房子"端到端流程。
- 目标：用户通过自然语言描述，自动创建包含墙、屋顶、门窗等基础构件的房屋模型。
- 推荐实现步骤：
  1. 设计自然语言到结构化命令的映射（如CreateHouseCommand）。
  2. 实现命令解析与分发，Server端调用Revit API批量创建墙、屋顶、门窗。
  3. 打通端到端链路，补充集成测试。
  4. 持续完善文档、注释和测试覆盖率。

---

（后续每次阶段性进展、CI/CD调整、开发重点变更时请及时更新本文件） 